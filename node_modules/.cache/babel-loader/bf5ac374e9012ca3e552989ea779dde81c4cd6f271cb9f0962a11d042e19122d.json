{"ast":null,"code":"import { db } from './firebase';\nimport { collection, getDocs, updateDoc, doc, addDoc } from 'firebase/firestore';\n\n// Update Firebase data for an existing user or create a new user if they don't exist\nexport const sendDataToFirebase = async data => {\n  try {\n    const usersCollection = collection(db, 'users');\n    console.log('Data to be updated or added:', data);\n    const querySnapshot = await getDocs(usersCollection);\n    const existingUser = querySnapshot.docs.find(doc => doc.data().userName === data.userName);\n    if (existingUser) {\n      const docRef = doc(usersCollection, existingUser.id);\n      await updateDoc(docRef, {\n        userSong: data.userSong,\n        songPreview: data.songPreview,\n        albumImg: data.albumImg\n      });\n      console.log('Document updated for user:', data.userName);\n    } else {\n      const newDocRef = await addDoc(usersCollection, data);\n      console.log('New document created with id:', newDocRef.id);\n    }\n  } catch (error) {\n    console.error('Error updating or adding data in Firebase:', error);\n  }\n};\n\n//get data from firebase\nexport const fetchUsersFromFirebase = async () => {\n  try {\n    const userRef = collection(db, 'users');\n    const userQuerySnapshot = await getDocs(userRef);\n    const userDataArray = [];\n    userQuerySnapshot.forEach(doc => {\n      userDataArray.push(doc.data());\n    });\n    return userDataArray;\n  } catch (error) {\n    console.error('Error fetching data:', error);\n  }\n};","map":{"version":3,"names":["db","collection","getDocs","updateDoc","doc","addDoc","sendDataToFirebase","data","usersCollection","console","log","querySnapshot","existingUser","docs","find","userName","docRef","id","userSong","songPreview","albumImg","newDocRef","error","fetchUsersFromFirebase","userRef","userQuerySnapshot","userDataArray","forEach","push"],"sources":["/Users/leosponnich/Documents/firebase_test/src/firebase/firebaseFunctions.js"],"sourcesContent":["import { db } from './firebase';\nimport {collection, getDocs, updateDoc, doc, addDoc} from 'firebase/firestore';\n\n\n// Update Firebase data for an existing user or create a new user if they don't exist\nexport const sendDataToFirebase = async (data) => {\n    try {\n      const usersCollection = collection(db, 'users');\n      console.log('Data to be updated or added:', data);\n  \n      const querySnapshot = await getDocs(usersCollection);\n      const existingUser = querySnapshot.docs.find((doc) => doc.data().userName === data.userName);\n  \n      if (existingUser) {\n        const docRef = doc(usersCollection, existingUser.id);\n        await updateDoc(docRef, {\n          userSong: data.userSong,\n          songPreview: data.songPreview,\n          albumImg: data.albumImg\n        });\n        console.log('Document updated for user:', data.userName);\n      } else {\n        const newDocRef = await addDoc(usersCollection, data);\n        console.log('New document created with id:', newDocRef.id);\n      }\n    } catch (error) {\n      console.error('Error updating or adding data in Firebase:', error);\n    }\n  };\n  \n\n    //get data from firebase\n    export const fetchUsersFromFirebase = async () => {\n        try {\n          const userRef = collection(db, 'users');\n          const userQuerySnapshot = await getDocs(userRef);\n    \n          const userDataArray = [];\n          userQuerySnapshot.forEach((doc) => {\n            userDataArray.push(doc.data());\n          });\n    \n          return userDataArray;\n        } catch (error) {\n          console.error('Error fetching data:', error);\n        }\n      };\n"],"mappings":"AAAA,SAASA,EAAE,QAAQ,YAAY;AAC/B,SAAQC,UAAU,EAAEC,OAAO,EAAEC,SAAS,EAAEC,GAAG,EAAEC,MAAM,QAAO,oBAAoB;;AAG9E;AACA,OAAO,MAAMC,kBAAkB,GAAG,MAAOC,IAAI,IAAK;EAC9C,IAAI;IACF,MAAMC,eAAe,GAAGP,UAAU,CAACD,EAAE,EAAE,OAAO,CAAC;IAC/CS,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAEH,IAAI,CAAC;IAEjD,MAAMI,aAAa,GAAG,MAAMT,OAAO,CAACM,eAAe,CAAC;IACpD,MAAMI,YAAY,GAAGD,aAAa,CAACE,IAAI,CAACC,IAAI,CAAEV,GAAG,IAAKA,GAAG,CAACG,IAAI,CAAC,CAAC,CAACQ,QAAQ,KAAKR,IAAI,CAACQ,QAAQ,CAAC;IAE5F,IAAIH,YAAY,EAAE;MAChB,MAAMI,MAAM,GAAGZ,GAAG,CAACI,eAAe,EAAEI,YAAY,CAACK,EAAE,CAAC;MACpD,MAAMd,SAAS,CAACa,MAAM,EAAE;QACtBE,QAAQ,EAAEX,IAAI,CAACW,QAAQ;QACvBC,WAAW,EAAEZ,IAAI,CAACY,WAAW;QAC7BC,QAAQ,EAAEb,IAAI,CAACa;MACjB,CAAC,CAAC;MACFX,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAEH,IAAI,CAACQ,QAAQ,CAAC;IAC1D,CAAC,MAAM;MACL,MAAMM,SAAS,GAAG,MAAMhB,MAAM,CAACG,eAAe,EAAED,IAAI,CAAC;MACrDE,OAAO,CAACC,GAAG,CAAC,+BAA+B,EAAEW,SAAS,CAACJ,EAAE,CAAC;IAC5D;EACF,CAAC,CAAC,OAAOK,KAAK,EAAE;IACdb,OAAO,CAACa,KAAK,CAAC,4CAA4C,EAAEA,KAAK,CAAC;EACpE;AACF,CAAC;;AAGC;AACA,OAAO,MAAMC,sBAAsB,GAAG,MAAAA,CAAA,KAAY;EAC9C,IAAI;IACF,MAAMC,OAAO,GAAGvB,UAAU,CAACD,EAAE,EAAE,OAAO,CAAC;IACvC,MAAMyB,iBAAiB,GAAG,MAAMvB,OAAO,CAACsB,OAAO,CAAC;IAEhD,MAAME,aAAa,GAAG,EAAE;IACxBD,iBAAiB,CAACE,OAAO,CAAEvB,GAAG,IAAK;MACjCsB,aAAa,CAACE,IAAI,CAACxB,GAAG,CAACG,IAAI,CAAC,CAAC,CAAC;IAChC,CAAC,CAAC;IAEF,OAAOmB,aAAa;EACtB,CAAC,CAAC,OAAOJ,KAAK,EAAE;IACdb,OAAO,CAACa,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;EAC9C;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}